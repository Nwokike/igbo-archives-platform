{% extends 'base.html' %}
{% load static %}

{% block title %}Cultural Archives - Igbo Archives{% endblock %}

{% block sub_navigation %}
<nav class="border-b border-sepia-pale/30 bg-heritage-cream/20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3">
        <div class="flex flex-wrap items-center gap-3">
            <div class="flex-1 min-w-[160px] sm:flex-none sm:w-40">
                <select class="form-select text-sm py-2" id="categoryFilter" name="category"
                        hx-get="{% url 'archives:list' %}"
                        hx-target="#archiveGrid"
                        hx-include="#typeFilter,#sortFilter,#searchInput"
                        hx-push-url="true">
                    <option value="">All Categories</option>
                    {% for cat in categories %}
                    <option value="{{ cat.slug }}" {% if request.GET.category == cat.slug %}selected{% endif %}>{{ cat.name }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="flex-1 min-w-[140px] sm:flex-none sm:w-36">
                <select class="form-select text-sm py-2" id="typeFilter" name="type"
                        hx-get="{% url 'archives:list' %}"
                        hx-target="#archiveGrid"
                        hx-include="#categoryFilter,#sortFilter,#searchInput"
                        hx-push-url="true">
                    <option value="">All Types</option>
                    <option value="image" {% if request.GET.type == 'image' %}selected{% endif %}>Images</option>
                    <option value="video" {% if request.GET.type == 'video' %}selected{% endif %}>Videos</option>
                    <option value="document" {% if request.GET.type == 'document' %}selected{% endif %}>Documents</option>
                    <option value="artifact" {% if request.GET.type == 'artifact' %}selected{% endif %}>Artifacts</option>
                </select>
            </div>
            
            <div class="flex-1 min-w-[140px] sm:flex-none sm:w-36">
                <select class="form-select text-sm py-2" id="sortFilter" name="sort"
                        hx-get="{% url 'archives:list' %}"
                        hx-target="#archiveGrid"
                        hx-include="#categoryFilter,#typeFilter,#searchInput"
                        hx-push-url="true">
                    <option value="-created_at" {% if request.GET.sort == '-created_at' or not request.GET.sort %}selected{% endif %}>Newest First</option>
                    <option value="created_at" {% if request.GET.sort == 'created_at' %}selected{% endif %}>Oldest First</option>
                    <option value="title" {% if request.GET.sort == 'title' %}selected{% endif %}>A-Z</option>
                    <option value="-title" {% if request.GET.sort == '-title' %}selected{% endif %}>Z-A</option>
                </select>
            </div>
            
            <div class="flex-1 min-w-[200px] relative">
                <input type="text" 
                       class="form-input text-sm py-2 pl-10"
                       placeholder="Search archives..." 
                       id="searchInput"
                       name="search"
                       value="{{ request.GET.search }}"
                       hx-get="{% url 'archives:list' %}"
                       hx-trigger="keyup changed delay:500ms"
                       hx-target="#archiveGrid"
                       hx-include="#categoryFilter,#typeFilter,#sortFilter"
                       hx-push-url="true">
                <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-vintage-beaver"></i>
            </div>
            
            <div class="flex items-center gap-1 bg-heritage-cream rounded-lg p-1">
                <button type="button" class="w-9 h-9 flex items-center justify-center rounded-md text-vintage-beaver hover:text-dark-brown hover:bg-white transition-colors view-btn active" id="gridViewBtn" title="Grid View">
                    <i class="fas fa-th"></i>
                </button>
                <button type="button" class="w-9 h-9 flex items-center justify-center rounded-md text-vintage-beaver hover:text-dark-brown hover:bg-white transition-colors view-btn" id="listViewBtn" title="List View">
                    <i class="fas fa-list"></i>
                </button>
            </div>
        </div>
    </div>
</nav>
{% endblock %}

{% block content %}
<div id="archiveGrid" class="archive-grid">
    {% include "archives/partials/archive_grid.html" %}
</div>
{% endblock %}

