{% load comments %}
{# TODO: Phase 4 - Implement reCAPTCHA properly with django-recaptcha #}

{% get_comment_form for object as form %}

<div class="guest-comment-form mt-4">
    <h4>Leave a Comment</h4>
    <p class="text-muted">Please <a href="{% url 'account_login' %}">log in</a> or leave a comment as a guest:</p>
    
    <form method="post" action="{% url 'comments-post-comment' %}">
        {% csrf_token %}
        {{ form.content_type }}
        {{ form.object_pk }}
        {{ form.timestamp }}
        {{ form.security_hash }}
        
        <div class="mb-3">
            <label for="id_name" class="form-label">Name *</label>
            <input type="text" class="form-control" id="id_name" name="name" required>
        </div>

        <div class="mb-3">
            <label for="id_email" class="form-label">Email *</label>
            <input type="email" class="form-control" id="id_email" name="email" required>
            <div class="form-text">Your email will not be published</div>
        </div>

        <div class="mb-3">
            <label for="id_comment" class="form-label">Comment *</label>
            <textarea class="form-control" id="id_comment" name="comment" rows="4" required></textarea>
        </div>

        {# reCAPTCHA will be properly implemented in Phase 4 #}

        <button type="submit" class="btn btn-primary">Post Comment</button>
    </form>
</div>
