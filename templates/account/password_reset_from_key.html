{% extends "base.html" %}

{% block title %}Set New Password - Igbo Archives{% endblock %}

{% block content %}
<div class="min-h-[60vh] flex items-center justify-center py-12">
    <div class="w-full max-w-md">
        <div class="card">
            <div class="card-body p-8">
                <div class="text-center mb-8">
                    <div
                        class="w-16 h-16 bg-vintage-gold/10 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-lock text-2xl text-vintage-gold"></i>
                    </div>
                    <h1 class="font-serif text-display-md text-dark-brown mb-2">Set New Password</h1>
                    <p class="text-vintage-beaver">Enter your new password below.</p>
                </div>

                {% if token_fail %}
                <div class="alert alert-error mb-6">
                    <i class="fas fa-exclamation-triangle"></i>
                    <div>
                        <p class="font-medium">Invalid or Expired Link</p>
                        <p class="text-sm">This password reset link is no longer valid. Please request a new one.</p>
                    </div>
                </div>
                <a href="{% url 'account_reset_password' %}" class="btn-primary btn-lg w-full">
                    <i class="fas fa-redo mr-2"></i> Request New Link
                </a>
                {% else %}
                <form method="post" class="space-y-5">
                    {% csrf_token %}

                    {% if form.non_field_errors %}
                    <div class="alert alert-error">
                        <i class="fas fa-exclamation-circle"></i>
                        <div>{{ form.non_field_errors }}</div>
                    </div>
                    {% endif %}

                    <div class="form-group">
                        <label for="{{ form.password1.id_for_label }}" class="form-label">New Password</label>
                        <input type="password"
                            class="form-input {% if form.password1.errors %}border-red-500{% endif %}"
                            id="{{ form.password1.id_for_label }}" name="password1" placeholder="Enter new password"
                            required>
                        {% if form.password1.errors %}
                        <p class="text-red-500 text-sm mt-1">{{ form.password1.errors|join:", " }}</p>
                        {% endif %}
                    </div>

                    <div class="form-group">
                        <label for="{{ form.password2.id_for_label }}" class="form-label">Confirm Password</label>
                        <input type="password"
                            class="form-input {% if form.password2.errors %}border-red-500{% endif %}"
                            id="{{ form.password2.id_for_label }}" name="password2" placeholder="Confirm new password"
                            required>
                        {% if form.password2.errors %}
                        <p class="text-red-500 text-sm mt-1">{{ form.password2.errors|join:", " }}</p>
                        {% endif %}
                    </div>

                    <button type="submit" class="btn-primary btn-lg w-full">
                        <i class="fas fa-check mr-2"></i> Set New Password
                    </button>
                </form>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}