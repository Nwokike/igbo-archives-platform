{% extends 'base.html' %}
{% load static %}

{% block title %}AI Assistant - Igbo Archives{% endblock %}

{% block sub_navigation %}
<nav class="border-b border-sepia-pale/20 bg-heritage-cream/10">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-2">
        <div class="flex items-center justify-between gap-3">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 bg-vintage-gold/10 rounded-lg flex items-center justify-center">
                    <i class="fas fa-brain text-sm text-vintage-gold"></i>
                </div>
                <div>
                    <h1 class="font-serif text-sm font-semibold text-dark-brown">Igbo Archives AI</h1>
                    <p class="text-xs text-vintage-beaver hidden sm:block">Cultural assistant powered by AI</p>
                </div>
            </div>
            {% if user.is_authenticated %}
            <a href="{% url 'ai:new_chat' %}" class="btn-primary btn-sm">
                <i class="fas fa-plus mr-1"></i> New Chat
            </a>
            {% else %}
            <a href="{% url 'account_login' %}?next={% url 'ai:new_chat' %}" class="btn-secondary btn-sm">
                Login to Chat
            </a>
            {% endif %}
        </div>
    </div>
</nav>
{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    {% if user.is_authenticated and sessions %}
    <!-- Recent Conversations -->
    <div class="mb-6">
        <h2 class="font-serif text-lg font-semibold text-dark-brown mb-4 flex items-center gap-2">
            <i class="fas fa-history text-vintage-gold"></i>
            Your Conversations
        </h2>
        <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-3">
            {% for session in sessions %}
            <a href="{% url 'ai:chat_session' session.id %}" class="card card-hover p-4 flex items-start gap-3 group">
                <div class="w-10 h-10 bg-vintage-gold/10 rounded-lg flex items-center justify-center flex-shrink-0">
                    <i class="fas fa-comments text-vintage-gold"></i>
                </div>
                <div class="flex-1 min-w-0">
                    <h3
                        class="text-sm font-medium text-dark-brown truncate group-hover:text-vintage-gold transition-colors">
                        {{ session.title }}
                    </h3>
                    <p class="text-xs text-vintage-beaver mt-0.5">{{ session.updated_at|timesince }} ago</p>
                </div>
                <i
                    class="fas fa-chevron-right text-xs text-vintage-beaver group-hover:text-vintage-gold transition-colors mt-3"></i>
            </a>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <!-- Capabilities Section -->
    <div class="card p-6">
        <h2 class="font-serif text-lg font-semibold text-dark-brown mb-4 text-center">What I Can Help With</h2>
        <div class="grid sm:grid-cols-2 gap-4 text-sm">
            <div class="flex items-start gap-3">
                <div class="w-8 h-8 bg-heritage-cream rounded-lg flex items-center justify-center flex-shrink-0">
                    <i class="fas fa-book text-vintage-gold"></i>
                </div>
                <div>
                    <h3 class="font-medium text-dark-brown">Igbo History & Culture</h3>
                    <p class="text-xs text-vintage-beaver">Learn about traditions, customs, and heritage</p>
                </div>
            </div>
            <div class="flex items-start gap-3">
                <div class="w-8 h-8 bg-heritage-cream rounded-lg flex items-center justify-center flex-shrink-0">
                    <i class="fas fa-language text-vintage-gold"></i>
                </div>
                <div>
                    <h3 class="font-medium text-dark-brown">Language Translation</h3>
                    <p class="text-xs text-vintage-beaver">English â†” Igbo with cultural context</p>
                </div>
            </div>
            <div class="flex items-start gap-3">
                <div class="w-8 h-8 bg-heritage-cream rounded-lg flex items-center justify-center flex-shrink-0">
                    <i class="fas fa-quote-left text-vintage-gold"></i>
                </div>
                <div>
                    <h3 class="font-medium text-dark-brown">Proverbs & Sayings</h3>
                    <p class="text-xs text-vintage-beaver">Explore wisdom of Igbo proverbs</p>
                </div>
            </div>
            <div class="flex items-start gap-3">
                <div class="w-8 h-8 bg-heritage-cream rounded-lg flex items-center justify-center flex-shrink-0">
                    <i class="fas fa-volume-up text-vintage-gold"></i>
                </div>
                <div>
                    <h3 class="font-medium text-dark-brown">Text-to-Speech</h3>
                    <p class="text-xs text-vintage-beaver">Listen to responses read aloud</p>
                </div>
            </div>
        </div>

        {% if not user.is_authenticated %}
        <div class="text-center mt-6 pt-4 border-t border-sepia-pale/20">
            <a href="{% url 'account_login' %}?next={% url 'ai:new_chat' %}" class="btn-primary">
                <i class="fas fa-sign-in-alt mr-2"></i> Login to Start Chatting
            </a>
        </div>
        {% else %}
        <div class="text-center mt-6 pt-4 border-t border-sepia-pale/20">
            <a href="{% url 'ai:new_chat' %}" class="btn-primary">
                <i class="fas fa-plus mr-2"></i> Start New Conversation
            </a>
        </div>
        {% endif %}
    </div>

    <!-- Trust Badges -->
    <div class="text-center mt-6">
        <div class="inline-flex flex-wrap items-center justify-center gap-4 text-xs text-vintage-beaver">
            <span class="flex items-center gap-1.5">
                <i class="fas fa-shield-alt text-vintage-gold text-sm"></i>
                Secure & Private
            </span>
            <span class="flex items-center gap-1.5">
                <i class="fas fa-database text-vintage-gold text-sm"></i>
                Grounded in Archives
            </span>
            <span class="flex items-center gap-1.5">
                <i class="fas fa-globe-africa text-vintage-gold text-sm"></i>
                Made for Igbo Heritage
            </span>
        </div>
    </div>
</div>
{% endblock %}